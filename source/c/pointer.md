# 指针（Pointer）

在 C 语言中，**指针不是一种“高级技巧”**，而是一种**描述数据位置的方式**。

你可以把变量理解为“数据”，  
把指针理解为“数据所在的位置（地址）”。

本章目标只有三个：

- 知道什么是指针  
- 能区分“传变量”和“传指针”的本质区别  
- 理解：什么时候能修改原始数据，什么时候不能  

**不涉及函数指针，不涉及复杂指针运算。**

---

## 一、什么是指针

指针，本质上是一个**存放地址的变量**。

```c
int a = 10;
int *p = &a;
````

含义拆解如下：

* `a`：一个 int 类型变量，存的是数值 10
* `&a`：变量 a 在内存中的地址
* `p`：一个指针变量，**里面存的是 a 的地址**

可以理解为：

> p 指向 a

---

## 二、指针的两个核心符号

### 1.取地址符 `&`

```c
&a
```

含义：
获取变量 a 在内存中的地址。

---

### 2.解引用符 `*`

```c
*p
```

含义：
通过指针 p，访问它所指向地址中的数据。

---

### 对照理解（非常重要）

```c
int a = 10;
int *p = &a;

a    // 10
*p   // 10

&a   // a 的地址
p    // a 的地址
```

📌 **p 和 &a 是同一个东西：地址**

---

## 三、指针类型的意义

```c
int *p;
float *q;
```

指针类型并不是“存什么”，
而是**告诉编译器：这个地址指向的数据是什么类型**。

作用有两个：

1. 决定 `*p` 取出多少字节
2. 决定后续指针运算的步长（后面章节会用到）

---

## 四、指针与普通变量的本质区别

这是本章的**核心重点**。

### 1.直接传变量（值传递）

```c
void add_one(int x)
{
    x = x + 1;
}

int a = 10;
add_one(a);
```

结果：

```c
a == 10
```

原因：

* a 的值 **被复制了一份** 给 x
* 函数内部修改的是副本
* **原始数据不会被修改**

---

### 2.传递指针（地址传递）

```c
void add_one(int *x)
{
    *x = *x + 1;
}

int a = 10;
add_one(&a);
```

结果：

```c
a == 11
```

原因：

* 传入的是 a 的地址
* `*x` 直接操作的是原始内存
* **原始数据被真正修改**

---

## 五、什么时候必须用指针

### 需要在函数内部修改外部数据时

例如：

* 修改变量值
* 修改数组内容
* 返回多个结果
* 操作外设寄存器、缓冲区

```c
void set_zero(int *x)
{
    *x = 0;
}
```

---

## 六、什么时候不需要指针

###  只做计算，不需要改变原始数据

```c
int square(int x)
{
    return x * x;
}
```

这种情况下：

* 用值传递更安全
* 代码更直观
* 不会产生副作用

---

## 七、变量名 ≠ 指针（但数组是特例）

普通变量：

```c
int a;
```

* `a` 是数据本身
* `&a` 才是地址

数组变量：

```c
int arr[10];
```

* `arr` 本身 **就是首元素地址**
* 在函数参数中，`arr` 等价于 `int *`

📌 这一点在数组章节会进一步展开。

---

## 八、一个直观总结

| 方式  | 传递内容 | 是否修改原始数据 |
| --- | ---- | -------- |
| 传变量 | 数值副本 | ❌ 否      |
| 传指针 | 内存地址 | ✅ 是      |

一句话记忆：

> **想改原数据，用指针；只算结果，用变量。**

---

## 九、本章不涉及的内容

以下内容在工程或竞赛中出现频率较低，本章不展开：

* 函数指针
* 多级指针
* 指针算术
* void 指针

理解基础后，再接触这些内容会自然很多。
