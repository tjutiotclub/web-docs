# 标准外设库STDIO

在C语言编程中，stdio.h 是一个非常重要的头文件，它是“standard input-output header”的缩写，意思是“标准输入输出头文件”。

stdio.h 头文件包含了一系列用于输入输出操作的函数原型（比如 printf 和 scanf 函数）、宏定义（比如 EOF 和 NULL）和类型声明（比如 FILE 和 size_t），是C语言标准库的核心组成部分之一。使用 #include 包含 stdio.h 头文件以后，我们就可以调用各种输入输出函数了，如 printf、scanf、fopen 等。


stdio.h 头文件的主要作用是为 C 程序提供标准化的输入输出接口，它定义了一系列函数和宏，使得程序员可以方便地进行文件操作、控制台输入输出、字符串格式化等任务。无论是简单的打印语句，还是复杂的文件读写操作，stdio.h 都提供了相应的函数。

在C语言开发中调用库使用的指令如下，结构为#include  <库名称>

```
#include <stdio.h>
```

以下为常用函数解释

***

## printf 函数

函数原型：

```
int printf(const char *format, ...);
```

| 函数名   | printf                                           |
| -------- | ------------------------------------------------ |
| 函数作用 | 将格式化字符串输出到标准输出（通常为终端/串口）  |
| 返回值   | 成功输出的字符数；出错时返回负值                 |
| 参数1    | format：格式控制字符串，包含普通字符和格式说明符 |
| 可变参数 | 与格式说明符一一对应的输出数据                   |

常用格式说明符：
 `%d`（十进制整数），`%f`（浮点数），`%c`（字符），`%s`（字符串），`%x`（十六进制）

应用示例：

```
printf("value=%d, voltage=%.2fV\n", value, voltage);
```

------

## scanf 函数

函数原型：

```
int scanf(const char *format, ...);
```

| 函数名   | scanf                                      |
| -------- | ------------------------------------------ |
| 函数作用 | 从标准输入读取数据，并按格式解析后存入变量 |
| 返回值   | 成功匹配并赋值的参数个数                   |
| 参数1    | format：格式控制字符串                     |
| 可变参数 | 用于存放输入数据的变量地址（必须是指针）   |

注意事项：

- **参数必须传地址**
- 输入格式不匹配会导致读取失败
- 在嵌入式系统中通常被重定向到串口

应用示例：

```
int a;
scanf("%d", &a);
```

------

## fprintf 函数

函数原型：

```
int fprintf(FILE *stream, const char *format, ...);
```

| 函数名   | fprintf                                    |
| -------- | ------------------------------------------ |
| 函数作用 | 将格式化字符串输出到指定的文件流           |
| 返回值   | 成功输出的字符数；出错返回负值             |
| 参数1    | stream：文件指针（如文件、stdout、stderr） |
| 参数2    | format：格式控制字符串                     |
| 可变参数 | 与格式说明符对应的输出数据                 |

应用示例：

```
fprintf(fp, "x=%d y=%d\n", x, y);
```

------

## fscanf 函数

函数原型：

```
int fscanf(FILE *stream, const char *format, ...);
```

| 函数名   | fscanf                       |
| -------- | ---------------------------- |
| 函数作用 | 从指定文件流中读取格式化数据 |
| 返回值   | 成功读取并赋值的参数个数     |
| 参数1    | stream：文件指针             |
| 参数2    | format：格式控制字符串       |
| 可变参数 | 存放读取结果的变量地址       |

应用示例：

```
fscanf(fp, "%d %f", &a, &b);
```

------

## sprintf 函数

函数原型：

```
int sprintf(char *str, const char *format, ...);
```

| 函数名   | sprintf                          |
| -------- | -------------------------------- |
| 函数作用 | 将格式化输出写入字符串缓冲区     |
| 返回值   | 写入的字符数（不含字符串结束符） |
| 参数1    | str：目标字符串缓冲区            |
| 参数2    | format：格式控制字符串           |
| 可变参数 | 与格式说明符对应的输出数据       |

⚠️ 注意：不进行缓冲区长度检查，存在溢出风险
 工程中更推荐使用 `snprintf`

应用示例：

```
char buf[50];
sprintf(buf, "ADC=%d", adc_value);
```

------

## getchar 函数

函数原型：

```
int getchar(void);
```

| 函数名   | getchar                         |
| -------- | ------------------------------- |
| 函数作用 | 从标准输入读取一个字符          |
| 返回值   | 读取到的字符（以 int 形式返回） |
| 参数     | 无                              |

说明：

- 返回值是 `int`，用于区分有效字符与 `EOF`
- 在嵌入式系统中常映射为串口接收

应用示例：

```
char ch = getchar();
```

------

## putchar 函数

函数原型：

```
int putchar(int ch);
```

| 函数名   | putchar                        |
| -------- | ------------------------------ |
| 函数作用 | 向标准输出发送一个字符         |
| 返回值   | 成功返回输出字符；失败返回 EOF |
| 参数     | ch：要输出的字符               |

说明：

- 是 `printf` 的最底层字符输出接口
- 常被用于实现串口重定向

应用示例：

```
putchar('A');
```
